/*! For license information please see process.js.LICENSE.txt */
(()=>{"use strict";var e={69392:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{u(n.next(e))}catch(e){r(e)}}function a(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i(780545);i.g.Process=class extends s.ProcessBase{constructor(e,t){var n,s,r;super(),this.callback=e,importScripts(null!==(n=t.path)&&void 0!==n?n:"algorithm.js"),this.algorithm=new i.g[null!==(s=t.className)&&void 0!==s?s:"GeneticAlgorithm"](e,null!==(r=t.data)&&void 0!==r?r:void 0),"sleep"in t&&void 0!==t.sleep&&null!==t.sleep&&(this._sleep=Number(t.sleep)),"minimumStep"in t&&void 0!==t.minimumStep&&null!==t.minimumStep&&(this._minimumStep=Number(t.minimumStep))}init(e){var t;return n(this,void 0,void 0,(function*(){yield this.algorithm.init(null!==(t=e.data)&&void 0!==t?t:void 0)}))}get isFinished(){return this.algorithm.hasReached}get sleep(){return void 0!==this._sleep?this._sleep:super.sleep}get minimumStep(){return void 0!==this._minimumStep?this._minimumStep:super.minimumStep}get progress(){return this.algorithm.progress}reset(e){var t,s;return n(this,void 0,void 0,(function*(){return e&&(this.algorithm=new i.g[null!==(t=e.className)&&void 0!==t?t:"GeneticAlgorithm"](this.callback,null!==(s=e.data)&&void 0!==s?s:void 0),yield this.init(e)),this.algorithm.reset()}))}step(){return n(this,void 0,void 0,(function*(){return this.algorithm.step()}))}getObject(){return this.algorithm.getObject()}}},58594:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;const n=i(29784);t.Controller=class{constructor(e,t){var i,s,r,o;this._listener=e,this.worker=new Worker(null!==(i=null==t?void 0:t.workerName)&&void 0!==i?i:"worker-controller.worker.js"),this.worker.addEventListener("message",(e=>{this.getListener()(n.deserialize(e.data))})),this.worker.postMessage(["init",null!==(s=null==t?void 0:t.path)&&void 0!==s?s:"process.js",null!==(r=null==t?void 0:t.className)&&void 0!==r?r:"Process",JSON.stringify(null!==(o=null==t?void 0:t.context)&&void 0!==o?o:{})])}getListener(){return this._listener}reset(e){this.worker.postMessage(["reset",JSON.stringify(null!=e?e:{})])}start(){this.worker.postMessage(["start"])}stop(){this.getListener()({status:"canceling"}),this.worker.postMessage(["stop"])}}},938022:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{u(n.next(e))}catch(e){r(e)}}function a(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessBase=void 0;const s=i(968552);t.ProcessBase=class{init(e){return n(this,void 0,void 0,(function*(){}))}get sleep(){return s.DEFAULT_SLEEP}get minimumStep(){return s.DEFAULT_MINIMUM_STEP}}},930139:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{u(n.next(e))}catch(e){r(e)}}function a(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Runner=void 0;const s=i(29784),r=i(968552);t.Runner=class{constructor(e){this.onPostMessage=e,this.onCancel=!1,this.isRunning=!1}setProcess(e){this.process=e}getOnUpdateCallback(){return()=>this.onUpdated()}onUpdated(){return n(this,void 0,void 0,(function*(){this.process&&this.onPostMessage(yield s.serializeProcess(this.process))}))}onStatusChanged(e){return n(this,void 0,void 0,(function*(){this.onPostMessage(s.serializeStatus(e))}))}sleep(e){return n(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}reset(e){return n(this,void 0,void 0,(function*(){if(!this.onCancel&&this.process){for(this.onCancel=!0,yield this.onStatusChanged("canceling");this.isRunning;)yield this.sleep(r.CANCEL_SLEEP);yield this.process.reset(e),this.onCancel=!1,yield this.onUpdated(),yield this.onStatusChanged("initialized")}}))}start(){return n(this,void 0,void 0,(function*(){if(this.isRunning||this.onCancel||!this.process)return;this.isRunning=!0,yield this.onStatusChanged("started");let e=this.process.progress;for(;!this.process.isFinished&&!this.onCancel;)yield this.process.step(),yield this.sleep(this.process.sleep),this.process.progress>e+this.process.minimumStep&&(e=this.process.progress,yield this.onUpdated());yield this.onUpdated(),this.process.isFinished?yield this.onStatusChanged("finished"):yield this.onStatusChanged("canceled"),this.onCancel=!1,this.isRunning=!1}))}stop(){return n(this,void 0,void 0,(function*(){!this.onCancel&&this.isRunning&&this.process&&(this.onCancel=!0)}))}}},406081:function(e,t){var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{u(n.next(e))}catch(e){r(e)}}function a(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=t.serializeStatus=t.serializeProcess=void 0;t.serializeProcess=e=>i(void 0,void 0,void 0,(function*(){return JSON.stringify({type:"update",data:yield e.getObject()})}));t.serializeStatus=e=>JSON.stringify({type:"status",data:{status:e}});t.deserialize=e=>{const t=JSON.parse(e);return t.type,t.data}},29784:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(406081),t)},968552:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MINIMUM_STEP=t.DEFAULT_SLEEP=t.CANCEL_SLEEP=void 0,t.CANCEL_SLEEP=100,t.DEFAULT_SLEEP=10,t.DEFAULT_MINIMUM_STEP=.01},780545:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Runner=t.Controller=t.ProcessBase=void 0;var n=i(938022);Object.defineProperty(t,"ProcessBase",{enumerable:!0,get:function(){return n.ProcessBase}});var s=i(58594);Object.defineProperty(t,"Controller",{enumerable:!0,get:function(){return s.Controller}});var r=i(930139);Object.defineProperty(t,"Runner",{enumerable:!0,get:function(){return r.Runner}})}},t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i(69392)})();